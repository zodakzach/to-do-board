{% extends "base.html" %} {% block content %}
<nav class="navbar bg-body-tertiary">
  <div class="container-fluid">
    <a class="navbar-brand small-gradient-text fw-bold" href="/todo-list"
      >To-Do Board</a
    >
    <button
      class="navbar-toggler dropdown"
      data-bs-toggle="dropdown"
      role="button"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <ul class="dropdown-menu dropdown-menu-end me-3">
      <li><a class="dropdown-item" href="#">Settings</a></li>
      <li><hr class="dropdown-divider" /></li>
      <li><a class="dropdown-item" href="/auth/logout">Logout</a></li>
    </ul>
  </div>
</nav>
<h1 class="mt-5 fw-bold text-center">
  {{ current_user.username | title }}'s To-Do Board
</h1>
<div class="container mt-5 mb-4 me-auto">
  <div class="row d-flex align-items-end me-5 ms-5">
    <div class="col-md-4">
      <div class="input-group search-box">
        <input
          type="text"
          class="form-control"
          aria-label="Search"
          placeholder="Search..."
          id="search"
        />
        <button class="btn btn-outline-secondary align-top" type="button">
          Search
        </button>
      </div>
    </div>
    <div class="col-md-8 d-flex justify-content-end">
      <button
        type="button"
        class="btn btn-primary fw-semibold"
        data-bs-toggle="modal"
        data-bs-target="#taskModal"
      >
        Add Tasks
      </button>
      <!-- Modal -->
      <div
        class="modal fade"
        id="taskModal"
        tabindex="-1"
        aria-labelledby="taskModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="taskModalLabel">Add Tasks</h1>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <div class="mb-3">
                <label for="taskDesc" class="form-label">Task</label>
                <textarea
                  rows="3"
                  class="form-control"
                  id="taskDesc"
                  placeholder="Description"
                ></textarea>
                <p class="invalid-feedback mb-0" id="taskDesc-error"></p>
              </div>

              <div class="mb-3">
                <input
                  class="form-check-input me-1"
                  type="checkbox"
                  value=""
                  id="taskCompCheck"
                />
                <label class="form-check-label" for="taskCompCheck"
                  >Completed</label
                >
              </div>

              <div class="mb-3">
                <label for="taskPrioritySel" class="form-label">Priority</label>
                <select
                  class="form-select"
                  aria-label="Default select example"
                  id="taskPrioritySel"
                >
                  <option selected>Select a Priority</option>
                  <option value="low">Low</option>
                  <option value="medium">Medium</option>
                  <option value="high">High</option>
                </select>
                <p class="invalid-feedback mb-0" id="taskPrioritySel-error"></p>
              </div>

              <div class="form-check form-switch mb-3">
                <label class="form-check-label" for="taskDueDateSwitch"
                  >Due Date</label
                >
                <input
                  class="form-check-input"
                  type="checkbox"
                  role="switch"
                  id="taskDueDateSwitch"
                  data-bs-toggle="collapse"
                  data-bs-target="#collapseDueDate"
                  aria-expanded="false"
                  aria-controls="collapseDueDate"
                />
              </div>

              <div class="collapse" id="collapseDueDate">
                <input
                  type="text"
                  class="form-control mb-3"
                  placeholder="Select a date"
                  id="taskDatePicker"
                  readonly
                />
                <p class="invalid-feedback mb-3" id="taskDatePicker-error"></p>

                <div class="input-group mb-3">
                  <label for="taskHourSel" class="input-group-text">Hour</label>
                  <select
                    class="form-select"
                    aria-label="Select Hour"
                    id="taskHourSel"
                  >
                    <option value="12" selected>12</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                  </select>
                  <label for="taskMinSel" class="input-group-text"
                    >Minute</label
                  >
                  <select
                    class="form-select"
                    aria-label="Select Minute"
                    id="taskMinSel"
                  >
                    <option value="00" selected>00</option>
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="30">30</option>
                    <option value="40">40</option>
                    <option value="50">50</option>
                  </select>
                  <label for="taskAmPmSel" class="input-group-text"
                    >AM/PM</label
                  >
                  <select
                    class="form-select"
                    aria-label="Select AM/PM"
                    id="taskAmPmSel"
                  >
                    <option value="AM" selected>AM</option>
                    <option value="PM">PM</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Close
              </button>
              <button type="button" class="btn btn-primary" id="taskBtn">
                Add Task
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="container">
  <table class="table table-striped table-hover table-bordered">
    <thead class="text-center">
      <tr>
        <th>Task</th>
        <th>Priority</th>
        <th>Due Date</th>
        <th>Completed</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody class="text-center" id="tablebody">
      {% for todo in user_todos %}
      <tr id="row{{todo.id}}">
        <td>{{ todo.task }}</td>
        <td>{{ todo.priority }}</td>
        <td>{{ todo.due_date }}</td>
        <td>{{ "Yes" if todo.completed else "No" }}</td>
        <td>
          <!-- Add action buttons here -->
          {% if not todo.completed %}
          <button
            class="btn btn-success btn-sm fw-semibold"
            data-todo-id="{{ todo.id }}"
            id="completeTask{{todo.id}}"
          >
            Mark as Complete
          </button>
          <button
            class="btn btn-primary btn-sm fw-semibold"
            data-todo-id="{{ todo.id }}"
            id="editTask{{todo.id}}"
          >
            Edit
          </button>
          {% endif %}
          <button
            class="btn btn-danger btn-sm fw-semibold"
            data-todo-id="{{ todo.id }}"
            id="deleteTask{{todo.id}}"
          >
            Delete
          </button>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
